:root{--rose:#ff4f7a;--bg1:#fff5f8;--bg2:#fdeef4;}
html,body{margin:0;height:100%;font-family:Inter,system-ui;overflow:hidden;}
body{background:linear-gradient(180deg,var(--bg1),var(--bg2));display:flex;align-items:center;justify-content:center;}
.stage{width:min(1200px,98vw);height:min(780px,95vh);background:white;border-radius:24px;position:relative;overflow:hidden;box-shadow:0 20px 50px rgba(0,0,0,0.1);transition:box-shadow 1s ease;}
.stage.glow{box-shadow:0 20px 80px rgba(255,79,122,0.35);}
.loading{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;background:white;z-index:100;}
.spinner{width:40px;height:40px;border:4px solid #eee;border-top:4px solid var(--rose);border-radius:50%;animation:spin 1s linear infinite;}
@keyframes spin{100%{transform:rotate(360deg);}}
.countdown{position:absolute;inset:0;display:grid;place-items:center;background:rgba(255,255,255,0.9);z-index:10;}
.count{font-size:clamp(60px,12vw,140px);font-weight:800;color:var(--rose);animation:pop 1.2s ease forwards;}
@keyframes pop{0%{opacity:0;transform:scale(0.8)}40%{opacity:1;transform:scale(1.2)}100%{opacity:0;transform:scale(1.3)}}
.actor{position:absolute;bottom:60px;left:-150px;width:120px; z-index:30;}
.actor.walk{animation:walk 7s ease forwards;}
@keyframes walk{100%{transform:translateX(35vw);}}
.bouquet{position:absolute;left:50%;top:45%;transform:translate(-50%,-50%);width:min(580px,90vw);height:min(580px,90vw);opacity:0;transition:opacity 1.5s ease;z-index:10;}
.bouquet.show{opacity:1;}
.flower{position:relative;width:100%;height:100%;padding:40px;box-sizing:border-box;display:flex;align-items:center;justify-content:center;}
.flower.dim{filter:blur(4px) brightness(0.8);}
.petal{position:absolute;overflow:hidden;cursor:pointer;box-shadow:0 12px 35px rgba(0,0,0,0.3);transition:all 0.4s cubic-bezier(0.25,0.46,0.45,0.94);border:2px solid rgba(255,255,255,0.95);transform-origin:50% 50%;}
.petal img{width:100%;height:100%;object-fit:cover;object-position:center;}
.petal.active{width:450px !important;height:360px !important;left:50% !important;top:50% !important;transform:translate(-50%,-50%) scale(1) !important;z-index:100;border-radius:20px;box-shadow:0 40px 100px rgba(0,0,0,0.5);clip-path:unset !important;animation:zoomIn 0.5s ease forwards;}
@keyframes zoomIn{0%{transform:translate(-50%,-50%) scale(0);}60%{transform:translate(-50%,-50%) scale(1.1);}100%{transform:translate(-50%,-50%) scale(1);}}
.close-btn{position:absolute;top:18px;right:18px;background:rgba(255,255,255,0.98);color:var(--rose);border:3px solid var(--rose);border-radius:50%;width:40px;height:40px;font-size:20px;font-weight:800;display:none;cursor:pointer;backdrop-filter:blur(20px);transition:all 0.3s ease;}
.close-btn:hover{background:var(--rose);color:white;transform:scale(1.15);}
.petal.active .close-btn{display:block;}
.confetti{position:absolute;inset:0;pointer-events:none;}
.confetti-piece{position:absolute;top:-10vh;pointer-events:none;animation:fall linear forwards;}
@keyframes fall{0%{transform:translateY(0) rotate(0deg);}100%{transform:translateY(110vh) rotate(720deg);}}
.text{position:absolute;bottom:40px;width:100%;text-align:center;font-size:26px;font-weight:700;opacity:0;transition:opacity 1.5s ease;line-height:1.4; z-index:20;}
.text.show{opacity:1;}
.restart{position:absolute;bottom:25px;right:30px;background:var(--rose);color:white;border:none;padding:14px 28px;border-radius:28px;cursor:pointer;opacity:0;pointer-events:none;transition:opacity 0.5s ease;font-weight:600;font-size:17px; z-index:20;}
.restart.show{opacity:1;pointer-events:auto;}
.restart:hover{background:#e9456a;transform:translateY(-3px);}
